# DummyAPI

Здесь представлено описание тестирования проекта DummyAPI. Далее вы можете подробнее познакомиться с процессом тестирования и его результатами.

## Оглавление
1. [Описание проекта](#описание-проекта)
    1. [POST](#post)
        1. [GET /post (get List)](#get-post-get-list)
        2. [POST /post/create (Create Post)](#post-postcreate-create-post)
2. [Майнд-карта](#майнд-карта)
3. [Коллекции Postman](#коллекции-postman)
4. [Баг-репорты](#баг-репорты)

## Описание проекта

https://dummyapi.io/  - данный сайт представляет собой сервис для тестирования API. Для выполения запросов необходим App ID, который можно получить автоматически после регистрацию на сайте. В качестве тестирования было взят объект __Post__.

### POST
___
#### GET /post (get List)
Возвращает список постов отсортированный по дате создания.
- Доступны параметры запроса разбиения на страницы. 
- Доступны созданные параметры запроса. 

__Response Body__:

__List__
```Javascript
{
data: Array(Model)
total: number(total items in DB)
page: number(current page)
limit: number(number of items on page)
}
```
__Post Preview__
```Javascript
{
id: string(autogenerated)
text: string(length: 6-50, preview only)
image: string(url)
likes: number(init value: 0)
tags: array(string)
publishDate: string(autogenerated)
owner: object(User Preview)
}
```
__User Preview__
```Javascript
{
id: string(autogenerated)
title: string("mr", "ms", "mrs", "miss", "dr", "")
firstName: string(length: 2-50)
lastName: string(length: 2-50)
picture: string(url)
}
```
___
#### POST /post/create (Create Post)
Создает новый пост. Возвращает данные о посте

__Request body__:

```javascript
{
text: string(length: 6-50, preview only)
image: string(url)
likes: number(init value: 0)
tags: array(string)
owner: string(User id)
}
```
__Response body__:

__Post__
```javascript
{
id: string(autogenerated)
text: string(length: 6-1000)
image: string(url)
likes: number(init value: 0)
link: string(url, length: 6-200)
tags: array(string)
publishDate: string(autogenerated)
owner: object(User Preview)
}
```
__User Preview__
```Javascript
{
id: string(autogenerated)
title: string("mr", "ms", "mrs", "miss", "dr", "")
firstName: string(length: 2-50)
lastName: string(length: 2-50)
picture: string(url)
}
```
## Майнд-карта
Данная МК представляет собой наор тестов для тестирования объекта __Post__. Подробная проверка расписана для __Get Post__ и __Create Post__.
![Alt-текст](https://i.imgur.com/rOKy4iP.png"МК")

Также майнд-карту можно [скачать.](https://github.com/SergeyQC/DummyAPI/blob/main/DummyAPI.xmind)

## Коллекции Postman

Для удобства и увелечения скорости тестирования, создано окружение с заранее сохраненным host и API Key, его можно [скачать.](https://github.com/SergeyQC/DummyAPI/blob/main/DummyAPI_postman_environment.json)

Запросы были объеденыне в одну коллекцию и разбиты на две папки для удобства ее экспортирования любым членом команды, ее можно [скачать.](https://github.com/SergeyQC/DummyAPI/blob/main/Post.postman_collection.json)

## Баг-репорты

В процессе тестировнаия были найдены не соотвествия с ожидаемым результатом и заведены баг-репорты. В качестве примера, прикрепил скрин:
![Alt-текст](https://i.imgur.com/KrR4you.png"МК")

Более подробно с ними можно ознакомиться по [ссылке.](https://docs.google.com/spreadsheets/d/1XoW6kW8iGQ1St1mtUD3-C-Yx2XklgPDXD6QuUGC3bW4/edit?usp=sharing)

## Авто-тесты
Для автоматизации тестирования всех методов (GET, POST, PATCH, DELETE) в едином цикле работы с постами, были созданы автотесты.
На данном этапе, для автотестов использовались сниппеты, позволяющие работать без глубокого знания кода java-script. Данный автотест представляет собой набор тестов для тестирования данных пользователя (User) и опубликованного поста (Post).

### Общие сниппеты

Для начал были заложены общие сниппеты, которые применялись для каждого метода. Были оценены три параметра:
- Статуст код
```Javascript
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
})
```
- Текст статуса кода
```Javascript
pm.test("Status is OK", function () {
    pm.response.to.have.status("OK");
});
```
- Время отклика
```Javascript
pm.test("Response time is less than 700ms", function () {
    pm.expect(pm.response.responseTime).to.be.below(700);
});
```
Т.к. автотест идет последовательно, от получения списка всех постов и создания нового, до его редактирования и удаления, неоходимо чтобы на этапе POST тест подтягивал id нового поста из тела ответа и сохранял. Для этого в тест метода POST добавлен сниппет, который сразу заносит в переменную коллекции полученный id, а необходимые нам методы, будут его использовать в качестве параметра запроса.

```Javascript
pm.collectionVariables.set("postId", jsonData.id);
```
### Индвинидуальные сниппеты

Для каждого метода были добавлены сниппеты, которые сравнивали значение ключей в отправеном request body с полученным от сервера response body. Далее пара примеров:

__GetUserList__
- Полученный спсиок юзеров является массивом
```Javascript
pm.test("Check body data[0] id is array", function () {
    pm.expect(jsonData.data).to.be.an('array');
});
```
- Полученный спсиок юзеров содержит не более 20 объектов
```Javascript
pm.test("Check limit is 20", function () {
    pm.expect(jsonData.limit).to.eql(20);
});
```
- Полученный спсиок взят со стартовой страницы 0
```Javascript
pm.test("Check page is 0", function () {
    pm.expect(jsonData.page).to.eql(0);
});
```
__CreatePost__
- Значение ключа _"id"_ является строкой
```Javascript
pm.test("Check body id is string", function () {
    pm.expect(jsonData.id).to.be.a('string');
});
```
- Заданное значение ключа _"likes"_ в request body совпадает с полученным в response body
```Javascript
pm.test("Check body likes", function () {
    pm.expect(jsonData.likes).to.eql(9999);
});
```

Более подробно, можно ознакомиться с ними:
- [Автотест для User.](https://github.com/SergeyQC/DummyAPI/blob/main/AutoTestApi%20for%20User.postman_collection.json)
- [Автотест для Post.](https://github.com/SergeyQC/DummyAPI/blob/main/AutoTestApi%20for%20Post.postman_collection.json)
